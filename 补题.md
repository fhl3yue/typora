**è¡¥é¢˜**                          int: 2147483647 = $2 \times 10 ^ 9$

ç‰›å®¢ç¬¬ä¸€åœº A 

${a_1,a_2,...,a_n}$  å…¶ä¸­ $a_i$ å€¼åŸŸ å°äº $2 ^ m$ ,é—®æœ‰å¤šå°‘ç§å­åºåˆ— æ–¹æ¡ˆæ•° ä½¿å¾— AND å€¼ ä¸º 1 

é¦–å…ˆé€‰æ‹© $C_n^{k}$ ä¸ª ç»„æˆ AND å€¼ä¸º1 çš„ æ•° ï¼Œ ä»–ä»¬æœ‰å…±åŒç‚¹ äºŒè¿›åˆ¶ä¸‹æœ€åä¸€ä½å‡æ˜¯1 ï¼Œ è¿˜è¦ä¿è¯ ä¸€å…±$m-1$ä½æƒ…å†µä¸‹, æ¯ä½å¯¹åº”çš„ä¸€åˆ— $k$ä¸ªï¼Œä¸å…¨ä¸º1 ï¼Œå…± $2^k -1$ ç§ï¼Œ($0000 -  1110$) ï¼Œå†  $m - 1$ æ¬¡å¹‚ã€‚

æœªé€‰æ‹©å‚ä¸æ„æˆçš„å…ƒç´  æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š æœ€åä¸€ä½å¿…é¡»ä¸º0ï¼Œ å…¶ä»–ä½æ— è¦æ±‚ï¼Œ $2 ^ {(m-1) \times (n - k)}$  

$k:$  $C_n ^{k} \times (2^k - 1) ^{m-1} \times 2^{(m-1)\times(n-k)}$  

ç¾å‰§$k$ ç´¯åŠ å³å¯  å»ºè®®åˆ—è¡¨å‘ç°ç»„åˆæ•°å­¦è§„å¾‹ 

```c++
#include <bits/stdc++.h>
typedef long long ll;

void solve() {
	int n,m,p;
	std::cin >> n >> m >> p;
	auto ksm = [&](ll a, ll b,ll p) {
		ll res = 1;
		while(b) {
			if(b & 1) res = res * a % p;
			a = a * a % p;
			b >>= 1;
		}
		return res;
	};
	std::vector<std::array<ll,5002>> c(n+1);
	for(int i = 0; i <= n; i++) c[i][0] = 1;
	for(int i = 1; i <= n; i++) {
		for(int j = 1; j <= i; j++) {
			c[i][j] = c[i-1][j] + c[i-1][j-1];
			c[i][j] %= p;
		}
	}
	ll ans = 0;
	for(int k = 1; k <= n; k++) {
		ans = ans + c[n][k] * ksm(2,(m-1)*(n-k),p) %p * ksm( ksm(2,k-1,p) , m-1 , p) % p;
		ans = (ans + p) % p;
	}
	std::cout << ans << '\n';
	return;
}

int main() {
	std::ios::sync_with_stdio(false);
	std::cin.tie(nullptr);
	int _ = 1;
	//std::cin >> _;
	while(_ --) {
		solve();
	}
	return 0;
}
```

$ div3 D $

$n,x \le 10^6$  $a\times b + b \times c + c \times a \le n  \quad  a + b + c \le x $   æ±‚æ­£æ•´æ•°ä¸‰å…ƒç»„${a,b,c}$ æ•°é‡ 

å°±æ˜¯ç¾å‰§  

```    c++
#include <bits/stdc++.h>
typedef long long ll;
const int N = 2e6 + 50;

void solve()
{
    int n,x;
    std::cin >> n >> x;
    ll ans = 0;
    for(int a = 1; a <= n; a ++) {
        for(int b = 1; a * b <= n && a + b <= x; b ++) 
        ans += std::min((n - a * b) / (a + b), x - (a + b));
    }
    std::cout << ans << '\n';
    return;
}
int main()
{
    std::ios::sync_with_stdio(false);
    std::cin.tie(nullptr);
    int _ = 1;
    std::cin >> _ ;
    while(_ --) {
        solve();
    }
    return 0;
}

```

$div3 C$

$A,B$ ä¸¤ä¸² ï¼Œçœ‹æœ€å°‘ä¿®æ”¹å‡ æ¬¡ èƒ½å¤Ÿä½¿ç»™å®šåŒºé—´ $[l,r]$ å†…å…ƒç´  æ’åºåç›¸åŒ

æ˜æ˜¾ä¸Šä¸‹ç›¸åŒ ä¸ç”¨æ”¹ 

ç‰¹æ®Šæ•°æ® $aaaa/bbbb$  

ç¾å‰§æ¯ä¸ªå­—ç¬¦ åœ¨è¯¥åŒºé—´å†…çš„ä¸Šä¸‹å·®è·æ•° ï¼Œç´¯åŠ 

```c++
#include <bits/stdc++.h>
typedef long long ll;
const int N = 2e6 + 50;

void solve()
{
    int n,q;
    std::cin >> n >> q;
    std::vector<std::array<int,26>> pre(n+1);
    std::string a,b;
    std::cin >> a >> b;
    for(int i = 1; i <= n; i ++) {
        pre[i] = pre[i-1];
        pre[i][a[i-1] - 'a'] ++;
        pre[i][b[i-1] - 'a'] --;
    }
    
    while(q --) {
        int l,r;
        ll ans = 0;
        std::cin >> l >> r;
        for(int c = 0; c < 26; c ++) {
            ans += std::max(0,pre[r][c] - pre[l-1][c]);
        }
        std::cout << ans << '\n';
    }
    
    return;
}
int main()
{
    std::ios::sync_with_stdio(false);
    std::cin.tie(nullptr);
    int _ = 1;
    std::cin >> _ ;
    while(_ --) {
        solve();
    }
    return 0;
}

```

$hdu  3  \quad1007$

åŒºé—´åŠ  ï¼ŒåŒºé—´åˆ¤æ–­ ç›¸ç­‰ï¼Œ å•è°ƒé€’å¢ ï¼Œå•è°ƒé€’å‡ ï¼Œ å•å³°æ•°åˆ—

å“¥å“¥ç”¨çš„æ–¹æ³•æ˜¯å·®åˆ† ï¼Œå°† æ¯ä¸ªä½ç½®$i$ çš„å·®åˆ†æ­£è´Ÿä½œä¸ºåŠ å…¥ $set$ çš„ä¾æ® 

è‹¥ æ­£ å’Œ é›¶ çš„é›†åˆå†…æ²¡æœ‰ä½ç½®  è¯´æ˜å•è°ƒé€’å‡ 

ç±»æ¯” æ³¨æ„ å•å³°æ•°åˆ— é¦–å…ˆä¸èƒ½å¹³ ï¼Œè¿˜è¦ä¿è¯ä¸¥æ ¼å•å¢åå•å‡

è™½ç„¶è¿™é¢˜å¾ˆéš¾ç¢°åˆ°ç±»ä¼¼çš„ ä½†æ˜¯å­¦ä¹ åˆ°äº†å†…ç½®å‡½æ•°çš„è®¾ç½®æ–¹æ³•  

```c++
#include <bits/stdc++.h>
typedef long long ll;

void solve() {
	int n;
	std::cin >> n;
	std::vector<ll> a(n),d(n);
	for(int i = 0; i < n; i++) {
		std::cin >> a[i];
	}
	for(int i = 1; i < n; i++) {
		d[i] = a[i] - a[i-1];
	}
	std::set<int> Z,P,N;
	auto work = [&](int i) {
		Z.erase(i);
		P.erase(i);
		N.erase(i);
		if(d[i] > 0) P.insert(i);// + 
		else if(d[i] < 0) N.insert(i);// -
		else Z.insert(i);// 0
	};
	for(int i = 1; i < n; i++) work(i);

	auto query = [&](int o,int l,int r) {
		if(o == 2) {
			return P.upper_bound(l) == P.lower_bound(r) && N.upper_bound(l) == N.lower_bound(r);
		} else if(o == 3) {
			return Z.upper_bound(l) == Z.lower_bound(r) && N.upper_bound(l) == N.lower_bound(r);
		} else if(o == 4) {
			return P.upper_bound(l) == P.lower_bound(r) && Z.upper_bound(l) == Z.lower_bound(r);
		} else if(o == 5) {
			if(Z.upper_bound(l) != Z.lower_bound(r))
				return false;
			auto pl = P.upper_bound(l);
			auto pr = P.lower_bound(r);
			auto nl = N.upper_bound(l);
			auto nr = N.lower_bound(r);
			if(pl == pr || nl == nr) return false;

			return *std::prev(pr) < *nl;
		}
	};
	int q;
	std::cin >> q;
	while(q --) {
		int o,l,r;
		std::cin >> o >> l >> r;
		l --;
		if(o == 1) {
			int x;
			std::cin >> x;
			if(l > 0) {
				d[l] += x;
				work(l);
			}
			if(r < n) {
				d[r]  -= x;
				work(r);
			}
		}
		else {
			std::cout << query(o,l,r) << '\n';
		}
	}
	return;
}

int main() {
	std::ios::sync_with_stdio(false);
	std::cin.tie(nullptr);
	int _ = 1;
	//std::cin >> _;
	while(_ --) {
		solve();
	}
	return 0;
}
```



$abc D$ 

$x$ è½´ä¸Š æœ‰ $n$ ä¸ªç‚¹ ï¼Œ æ±‚ç»™å®šç‚¹$b[i]$ åœ¨è¯¥è½´ä¸Šè·ç¦»ç¬¬$k[i]$ è¿‘çš„ç‚¹ ä¸ $b[i]$ çš„(æœ€è¿‘)è·ç¦»

äºŒåˆ†ç­”æ¡ˆ è·ç¦»  çœ‹çœ‹è¯¥ç‚¹ å‘å·¦å³å»¶ä¼¸çš„è·ç¦»èƒ½å¦åŒ…å« $k[i]$ä¸ª ç‚¹ 

```c++
#include <bits/stdc++.h>
typedef long long ll;
const int N = 2e6 + 50;

void solve()
{
    int n,q;
    std::cin >> n >> q;
    std::vector<int> a(n), b(q),k(q);
    for(int i = 0; i < n; i ++) std::cin >> a[i];
    std::sort(a.begin(), a.end());
    for(int i = 0; i < q; i ++) {
        std::cin >> b[i] >> k[i];
        int l = 0, r = 2e8, x = 0;
        while(l <= r) {
            int mid = (l + r) >> 1;
            int ml = b[i] - mid, mr = b[i] + mid;
            int cnt = std::upper_bound(a.begin(), a.end(), mr) - std::lower_bound(a.begin(), a.end(), ml);
            if(cnt >= k[i]) {
                x = mid;
                r = mid - 1;
            }
            else l = mid + 1;
        }
        std::cout << x << '\n';
    }
    return;
}
int main()
{
    std::ios::sync_with_stdio(false);
    std::cin.tie(nullptr);
    int _ = 1;
    //std::cin >> _ ;
    while(_ --) {
        solve();
    }
    return 0;
}

```

$dp\quad  + \quad bitset$

ä¸€å…±æœ‰$n$ä¸ªæ•°ï¼Œç¬¬$i$ä¸ªæ•°æ˜¯$x_i$, $x_i$ å¯ä»¥å– $[l_i,r_i]$ ä¸­ä»»æ„çš„ä¸€ä¸ªå€¼ã€‚è®¾ $S = \sum{{x_i}^2}$ï¼Œæ±‚ S ç§ç±»æ•°ã€‚

```c++
bitset<N> f//ç›¸å½“äºbool f[N]
f.any()//æ•´ä¸ªäºŒè¿›åˆ¶ä¸­æ˜¯å¦æœ‰ä¸€ä¸ªä½ç½®è¢«ç½®ä¸º1
f.none()//æ˜¯å¦æ•´ä¸ªfä¸­æ‰€æœ‰ä½ä¸Šéƒ½æ˜¯0
f.count()//äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°
f.set()//å°†äºŒè¿›åˆ¶å„ä¸ªä½ç½®å…¨éƒ½ç½®ä¸º1
f.set(i)//ç›¸å½“äºf[i]=1
f.reset()//å°†äºŒè¿›åˆ¶å„ä¸ªä½ç½®å…¨éƒ½ç½®ä¸º0
f.reset(i)//ç›¸å½“äºf[i]=0
f.flip()//å°†äºŒè¿›åˆ¶æ‰€æœ‰ä½å–å
f.flip(i)//ç›¸å½“äºf[i]^=1
```

é€šè¿‡$STL$ä¸­çš„$bitset$å»ä¼˜åŒ–ã€‚
æ¯”å¦‚ 11001 è¡¨ç¤º 1 4 5 å¯ä»¥ç”¨åŠ æ³•å¾—åˆ°ï¼Œå› ä¸º ä½ç½®1 4 5ä¸Šçš„æ•°ä¸º1
æ€»ç»“ä¸€ä¸‹ï¼Œ$bitset$çš„ç¬¬Xä½ä¸º1è¡¨ç¤ºæ•´æ•°Xå¯ä»¥é€šè¿‡åŠ æ³•å¾—åˆ°ã€‚

$ans[i][j]$  è¡¨ç¤º ç¬¬$i$è¡Œ èƒ½ä¸èƒ½å‡ºç° $j$ è¿™ä¸ªå€¼   å­˜çš„æ˜¯é•¿åº¦ä¸º N çš„01ä¸²

```c++
#include <bits/stdc++.h>
typedef long long ll;
const int N = 1e6 + 50;
void solve() {
	int n;
	std::cin >> n;
	std::bitset<N> ans[101];
	ans[0][0] = 1;
	for(int i = 1,l,r; i <= n; i++) {
		std::cin >> l >> r;
		for(int j = l; j <= r; j++) {
			ans[i] |= ans[i-1] << j * j;
		}
	}
	std::cout << ans[n].count() << '\n'; 	
	return;
}

int main() {
	std::ios::sync_with_stdio(false);
	std::cin.tie(nullptr);
	int _ = 1;
	//std::cin >> _;
	while(_ --) {
		solve();
	}
	return 0;
}
```

$D$ 

â€‰â€‰â€‰â€‰â€‰â€‰â€‰â€‰â€‰â€‰$\,\,\,\,\,\,\,\,\,\,$å°çº¢å¸Œæœ›å‡ºä¸€åœºé¢˜ç›®ï¼Œä½†æ˜¯ä»–çš„å®åŠ›åˆä¸å¤Ÿï¼Œæ‰€ä»¥ä»–æƒ³åˆ°å¯ä»¥ä»ä»¥å‰çš„æ¯”èµ›ä¸­å„æŠ½ä¸€é¢˜ï¼Œæ¥ç»„æˆä¸€åœºæ¯”èµ›ã€‚ä¸è¿‡ä¸€åœºæ¯”èµ›çš„éš¾åº¦åº”è¯¥æ˜¯æœ‰é™åˆ¶çš„ï¼Œæ‰€ä»¥æ‰€ä»¥è¿™ä¸€åœºæ¯”èµ›ä¼šç»™ä¸€ä¸ªç›®æ ‡éš¾åº¦åˆ†æ•° $\rm target$ ã€‚  
â€‰â€‰â€‰â€‰â€‰â€‰â€‰â€‰â€‰â€‰$\,\,\,\,\,\,\,\,\,\,$å°çº¢é€‰ $n$ åœºæ¯”èµ›ï¼Œæ¯åœº $m$ ä¸ªé¢˜ï¼Œå°çº¢ä¼šä»æ¯ä¸€åœºé€‰ä¸€é“é¢˜ï¼Œä½¿å…¶ç»„æˆçš„é¢˜çš„éš¾åº¦åˆ†æ•°å°½é‡æ¥è¿‘ $\rm target$ ã€‚å°çº¢æƒ³çŸ¥é“æŒ‘é€‰çš„é¢˜çš„éš¾åº¦åˆ†æ•°ä¸ $\rm target$ ç›¸å·®çš„æœ€å°å€¼æ˜¯å¤šå°‘ã€‚

```c++
#include <bits/stdc++.h>
typedef long long ll;
const int N = 1e6 + 50;
int a[105][50];
void solve() {
	int n,m;
	std::cin >> n >> m;
	std::bitset<N> ans[101];
	ans[0][0] = 1;
    for(int i = 1; i <= n; i++) {
        for(int j = 1; j <= m; j++) 
            std::cin >> a[i][j];
    }
	for(int i = 1; i <= n; i++) {
		for(int j = 1; j <= m; j++) {
            ans[i] |= ans[i-1] << a[i][j];
        }
	}
    int tar , res = N;
    std::cin >> tar;
    for(int i = 0; i <= 10000; i++) {
        if(ans[n][i]) {
            res = std::min(res,std::abs(tar - i));
        }
    }
    std::cout << res << '\n';
	
	return;
}

int main() {
	std::ios::sync_with_stdio(false);
	std::cin.tie(nullptr);
	int _ = 1;
	//std::cin >> _;
	while(_ --) {
		solve();
	}
	return 0;
}
```

$E$ 

â€‰â€‰â€‰â€‰â€‰â€‰â€‰â€‰â€‰â€‰$\,\,\,\,\,\,\,\,\,\,$å·²çŸ¥é•¿åº¦ä¸º $n$ çš„åºåˆ— $a_1,a_2,\dots,a_n$ ï¼Œå®šä¹‰ä¸€æ¬¡æ“ä½œçš„è¿‡ç¨‹ä¸ºï¼šé€‰æ‹©ä»»æ„ä¸€ä¸ªå…ƒç´ ï¼Œéšåï¼Œå°† $\left \lfloor \dfrac{a_i}{2} \right \rfloor$ï¼ˆå‘ä¸‹å–æ•´ï¼‰æ·»åŠ åˆ°åŸåºåˆ—çš„ç»“å°¾ï¼Œå¹¶å°† $a_i$ ä»åŸåºåˆ—ä¸­åˆ é™¤ã€‚  
â€‰â€‰â€‰â€‰â€‰â€‰â€‰â€‰â€‰â€‰$\,\,\,\,\,\,\,\,\,\,$ä½ å¯ä»¥è¿›è¡Œä»»æ„å¤šæ¬¡æ“ä½œï¼ˆä¹Ÿå¯ä»¥ä¸€æ¬¡æ“ä½œéƒ½ä¸åšï¼‰ï¼Œè¦æ±‚ä½¿å¾—åºåˆ—çš„ $\rm MEX$ æœ€å¤§ã€‚  
â€‰â€‰â€‰â€‰â€‰â€‰â€‰â€‰â€‰â€‰$\,\,\,\,\,\,\,\,\,\,$æ•°ç»„çš„ $\rm MEX$ å®šä¹‰ä¸ºï¼šæ²¡æœ‰å‡ºç°åœ¨æ•°ç»„ä¸­çš„æœ€å°éè´Ÿæ•´æ•°ï¼Œä¾‹å¦‚ï¼Œæ•°ç»„ $\{3,1,2\}$ çš„ $\rm MEX$ ä¸º $0$ ã€‚

äºŒåˆ†æœ€åèƒ½è¾¾æˆçš„å€¼  $O(nlogn)$ 

```c++
#include <bits/stdc++.h>
typedef long long ll;

void solve() {
	int n;
	std::cin >> n;
	std::vector<int> a(n),b(n);
	for(int i = 0; i < n; i++) std::cin >> a[i];
	auto check = [&] (int t) {
        b = a;
		std::set<int> s;
		for(int i = 0; i < n; i++) {
			while(b[i] > t) b[i] /= 2;
			while(s.count(b[i]) && b[i] > 0) b[i] /= 2;
			s.insert(b[i]);
		}
		return (s.size() == (t + 1));
	};
	int l = 0, r = n + 1, x = 0;
	while(l <= r) {
		int mid = (l + r) >> 1;
		if(check(mid)) {
			l = mid + 1;
			x = mid;
		}
		else r = mid - 1;
	}
	std::cout << x + 1 << '\n';
	return;
}

int main() {
	std::ios::sync_with_stdio(false);
	std::cin.tie(nullptr);
	int _ = 1;
	std::cin >> _;
	while(_ --) {
		solve();
	}
	return 0;
}
```

$1992 E$ 

$num = n \times a - b$

$i = len \times a - b$   

$a \le 10000   \quad len \le 2$   å› æ­¤ $i æ˜¯ä¸ªä½æ•° $  æšä¸¾  æ³¨æ„$n = 1$ 

```c++
#include <bits/stdc++.h>
typedef long long ll;

void solve() {
	int n;
	std::cin >> n;

    if(n == 1) {
        std::cout << 9999 << '\n';
        for(int i = 2; i <= 10000; i++) {
            std::cout << i << " " << i - 1<< '\n';
        }
        return;
    }
	std::string s = std::to_string(n),o = s;
	for(int i = 1; i <= 7; i++) s = s + o; // 10101010101010
	std::set<std::pair<int,int>> se;
 	for(int i = 1; i <= 7; i++) {
 		std::string c = s.substr(0,i);// 10101
 		int num = 0;
 		for(int j = 0; j < i; j++) {
 			num = num * 10 + (c[j] - '0');
 		}
 		int p = n - o.length();
 		int q = num - i;
        if(p == 0) continue;
 		if(q % p == 0 && p != 0){
            int A = q / p;
            int B = n * A - num;
            if(A != 0 && B != 0 && A <= 10000) se.insert({A,B});
        }
	}
	std::cout << se.size() << '\n';
	for(auto [a,b] : se) {
		std::cout << a << " " << b << '\n';
	}
	return;
}

int main() {
	std::ios::sync_with_stdio(false);
	std::cin.tie(nullptr);
	int _ = 1;
	std::cin >> _;
	while(_ --) {
		solve();
	}
	return 0;
}
```

$æ²³å— 3 E$

åœ¨ä¸€ä¸ªé•¿åº¦ä¸º$n$çš„çº¸å¸¦ä¸Šï¼Œåˆå§‹æ—¶æ‰€æœ‰ä½ç½®é¢œè‰²ä¸ºç™½è‰²,ç°åœ¨è¦æ‰§è¡Œä»¥ä¸‹ä¸¤ç§æ“ä½œä¸€å…±$q$æ¬¡

æ“ä½œä¸€ï¼šè¾“å…¥ä¸€ä¸ªä¸‹æ ‡$x$,ä½ éœ€è¦å°†ä½ç½®$x$çš„é¢œè‰²ç¿»è½¬(ç™½è‰²å˜ä¸ºé»‘è‰²ï¼Œé»‘è‰²å˜ä¸ºç™½è‰²)

æ“ä½œäºŒ; è¾“å…¥ä¸¤ä¸ªæ­£æ•´æ•°$L , R$,ä½ éœ€è¦è¾“å‡ºåŒºé—´\[$[L,R]$ä¸­çš„è¿ç»­çš„ç™½è‰²åŒºé—´é•¿åº¦æœ€å¤§å€¼

```c++
#include <bits/stdc++.h>
typedef long long ll;
const int N = 2e6 + 50;
struct node{
	int l,r,v;
	int lmx,rmx,tmx; // å·¦ å³ æ€»
}t[N];

void pushup(node &u,node &l,node &r) {
	u.lmx = std::max(l.lmx, l.lmx == l.r - l.l + 1?l.lmx + r.lmx:l.lmx);
	u.rmx = std::max(r.rmx, r.rmx == r.r - r.l + 1?r.rmx + l.rmx:r.rmx);
	u.tmx = std::max({l.tmx,r.tmx,l.rmx + r.lmx});
}

void push_up(int u) {
	pushup(t[u],t[u<<1],t[u<<1|1]);
}
void build(int u,int l,int r) {
	t[u].l = l; t[u].r = r;
	if(l == r) {
		t[u] = {l,r,0,1,1,1};
		return;
	}
    int mid = (l + r) >> 1;
    build(u << 1,l,mid);
    build(u << 1 | 1,mid + 1,r);
    push_up(u);
}

void modify(int u,int x) {
	int l = t[u].l, r = t[u].r;
	if(l == x && r == x) {
		int pv = t[u].v ^ 1;
		if(pv == 0) t[u] = {l,r,pv,1,1,1};
		else t[u] = {l,r,pv,0,0,0};
		return;
	}
	int mid = l + r >> 1;
	if(x <= mid) modify(u << 1,x);
	if(x > mid) modify(u << 1 | 1,x);
	push_up(u);
}
node query(int u,int l,int r) { 
	if(l <= t[u].l && t[u].r <= r) return t[u];
	int mid = t[u].l + t[u].r >> 1;
	if(r <= mid) return query(u << 1,l,r);
	else if(l > mid) return query(u << 1 | 1,l,r);
	else {
		node p,pl,pr;
		pl = query(u << 1,l,r);
		pr = query(u << 1 | 1,l,r);
		pushup(p,pl,pr);
		return p;
	}
}
void solve() {
	int n,q;
	std::cin >> n >> q;
	build(1,1,n);
	for(int i = 1,op,x,y; i <= q; i++) {
		std::cin >> op;
		if(op == 1) {
			std::cin >> x;
			modify(1,x);
		}
		else {
			std::cin >> x >> y;
			std::cout << query(1,x,y).tmx << '\n';
		}
	}
	return;
}

int main() {
	std::ios::sync_with_stdio(false);
	std::cin.tie(nullptr);
	int _ = 1;
	//std::cin >> _;
	while(_ --) {
		solve();
	}
	return 0;
}
```

$ç‰›å®¢ 2 E$ 

$gcd(x,y) = x \oplus  y$  ç»™$x$ , æ±‚ ä»»æ„$y,y < x$ 

$....1000$ è‹¥åé¢éƒ½æ˜¯$0$ ï¼Œè¡¨ç¤ºèƒ½æ•´é™¤$2^x$ ï¼Œè‹¥$y$çš„$1$å‰é¢ä¸å…¶ç›¸åŒï¼Œå¼‚æˆ–åæ¶ˆå¤±ï¼Œ èƒ½ä¿è¯

$....0000$  èƒ½æ»¡è¶³è¦æ±‚ï¼Œ  åªè¦$x$ å‡æ‰ç¬¬ä¸€ä¸ªä¸€ä»¥åŠåé¢å‡ºç°çš„æ‰€æœ‰å³å¯ï¼Œ $lowbit(x)$ è¿”å›ç¬¬ä¸€ä¸ª1ä»£è¡¨çš„äºŒçš„å¹‚æ¬¡

```c++
#include <bits/stdc++.h>
typedef long long ll;
void solve() {
    ll x;
    std::cin >> x;
    auto lowbit = [&] (ll i) {
      return i & (-i);  
    };
    if(x - lowbit(x) > 0) {
        std::cout << x - lowbit(x) << '\n';
    }
    else std::cout << -1 << '\n';
    return;
}
 
int main() {
    std::ios::sync_with_stdio(false);
    std::cin.tie(nullptr);
    int _ = 1;
    std::cin >> _;
    while(_ --) {
        solve();
    }
    return 0;
}
```

$ç‰›å®¢2 C$

çº¢è‰²åœ¨ä¸€ä¸ª 2â‹…ğ‘› çš„ç½‘æ ¼ä¸Šï¼ŒæŸäº›å•å…ƒæ ¼æ˜¯çº¢è‰²çš„ï¼Œå…¶ä»–å•å…ƒæ ¼æ˜¯ç™½è‰²çš„ã€‚

çº¢è‰²å¯ä»¥æœ€åˆé€‰æ‹©ä¸€ä¸ªçº¢è‰²å•å…ƒæ ¼ï¼Œå¹¶ä¸”åœ¨æ¯ä¸€æ­¥ä¸­ï¼Œå¯ä»¥é€‰æ‹©ä¸Šæ–¹ã€ä¸‹æ–¹ã€å·¦ä¾§æˆ–å³ä¾§çš„çº¢è‰²å•å…ƒæ ¼ã€‚å½“çº¢è‰²ç¦»å¼€ä¸€ä¸ªå•å…ƒæ ¼æ—¶ï¼Œé‚£ä¸ªå•å…ƒæ ¼ä¼šç«‹åˆ»å˜æˆç™½è‰²ã€‚

çº¢è‰²æƒ³çŸ¥é“å¥¹å¯ä»¥èµ°çš„æœ€å¤§æ­¥æ•°ã€‚

å¦‚æœæ²¡æœ‰åˆå§‹çº¢è‰²å•å…ƒæ ¼ï¼Œè¯·è¾“å‡º 0ã€‚

å“¥å“¥çš„ä»å·¦åˆ°å³æ­£å‘$dp$,

```c++
#include <bits/stdc++.h>
typedef long long ll;
 
void solve() {
    int n,ans = 0;
    std::cin >> n;
    std::string s[2];
    std::cin >> s[0] >> s[1];
    int dp[2] = {};
    for(int i = 0; i < n; i++) {
        if(s[0][i] == 'R') dp[0]++;
        else dp[0] = 0;
        if(s[1][i] == 'R') dp[1]++;
        else dp[1] = 0;
        if(s[0][i] == 'R' && s[1][i] == 'R') {
            int p = dp[0], q = dp[1];// é‡å¤ä½¿ç”¨ é˜²æ­¢æ›´æ”¹
            dp[0] = std::max(p,q + 1);
            dp[1] = std::max(q,p + 1);// 
        }
        ans = std::max({ans,dp[0],dp[1]});
    }
    std::cout << std::max(0,ans - 1);
    return;
}
 
int main() {
    std::ios::sync_with_stdio(false);
    std::cin.tie(nullptr);
    int _ = 1;
    //std::cin >> _;
    while(_ --) {
        solve();
    }
    return 0;
}
```

$ç‰›å®¢2H$

æ›´éš¾çš„ä¸€é“ $dp$ 

```c++
#include <bits/stdc++.h>
typedef long long ll;
// é¢˜ç›®è¦æ±‚ç»è¿‡ å¹¶éåœç•™
void solve() {
	int n,x,y;
	std::cin >> n >> x >> y;
	std::vector<std::array<int,2>> a(n+1);
	a[0] = {0,0};
	std::string s;
	std::cin >> s;

	for(int i = 0; i < n; i++) {
		a[i+1] = a[i];
		if(s[i] == 'W') a[i+1][1] ++;
		else if(s[i] == 'S') a[i+1][1]--;
		else if(s[i] == 'A') a[i+1][0]--;
		else a[i+1][0]++;
	}
	ll ans = 0;
    for(int i = 0; i <= n; i++) {
        std::cout << a[i][0] << " " << a[i][1] << '\n'; // å‰ç¼€ä½ç½®
    }
	std::map<std::array<int,2>,int> mp;
	for(int i = n; i >= 0; i--) {
		mp[{a[i][0],a[i][1]}] = i;
		if(mp.count({a[i][0] + x, a[i][1] + y})) {
			int j = mp[{a[i][0] + x, a[i][1] + y}]; // j = i, x y = 0
			j = std::max(j,i+1);//æ›´æ–°ç´¢å¼•jï¼Œç¡®ä¿å®ƒæ˜¯å½“å‰ç´¢å¼•iå’Œæ»¡è¶³æ¡ä»¶çš„ç´¢å¼•jä¸­çš„è¾ƒå¤§å€¼ã€‚
            //std::cout <<i << ": " <<  j << "  "; 
			ans += n - j + 1;
		}
 	}
 	std::cout <<'\n' <<  ans << '\n';
	return;
}
/*
0 0   x,y: 1,1  // -2,-1 + 1,1 = -1,0(r = 5) -> 3-5 3-6
-1 0 (i = 1)
-1 -1
-2 -1
-2 0
-1 0
0 0
3: 5  2: 6  
3
*/
int main() {
	std::ios::sync_with_stdio(false);
	std::cin.tie(nullptr);
	int _ = 1;
	//std::cin >> _;
	while(_ --) {
		solve();
	}
	return 0;
}
```

$æ²³å— 3 G$

ç°æœ‰ä¸‰ä¸ªæ­£æ•´æ•° $A,B,C$ï¼Œè¯·ä½ æ‰¾ä¸‰ä¸ªæ•´æ•°$x,y,z$æ»¡è¶³$x+y+z=n$ï¼Œä¸”$0\leq x,y,z$ï¼Œä½¿å¾— $|x*A + y*B + z*C - W|$ æœ€å°ã€‚  

ä¸ºäº†ç®€åŒ–é¢˜ç›®ï¼Œç°åœ¨åªè¦æ‰¾åˆ°$|x*A + y*B + z*C - W|$çš„æœ€å°å€¼ã€‚

å¤šç»„æ•°æ®$T$  , $n$ çš„å’Œå°äº $10^6$ 

å¦‚æœéœ€è¦æ±‚å‡ºå•å³°å‡½æ•°çš„æå€¼ç‚¹ï¼Œé€šå¸¸ä½¿ç”¨äºŒåˆ†æ³•è¡ç”Ÿå‡ºçš„ä¸‰åˆ†æ³•æ±‚å•å³°å‡½æ•°çš„æå€¼ç‚¹ã€‚

æšä¸¾ $x$, $y + z = n - x$ , ä¿ç•™$y$ æˆ– $x$ , $f(x) = x * A + y * B + (n - x - y) * C - w$ 

ç”±äºç»å¯¹å€¼ï¼Œ å…ˆé€’å‡åé€’å¢ ï¼Œç¬¦åˆå•å³°å‡½æ•°ï¼Œ æ—¶é—´å¤æ‚åº¦ $O(nlog n)$ 

```c++
while (r - l > eps) {  // eps çœ‹é¢˜ç›® æ•´æ•°ä¸‰åˆ†
  mid = (l + r) / 2;
  lmid = mid - eps;
  rmid = mid + eps;
  if (f(lmid) < f(rmid))
    r = mid;
  else
    l = mid;
}
```

```c++
#include <bits/stdc++.h>
typedef long long ll;

void solve() {
	ll A,B,C,n,W;
	std::cin >> A >> B >> C >> n >> W;
	ll ans = 1e18;
	auto check = [&] (int x,int y) {
		int z = n - x - y;
		return std::abs(A * x + B * y + C * z - W);
	};
	for(int x = 0; x <= n; x ++) {
		int l = 0, r = n - x;
		while(r - l > 1) {
			int mid = l + r >> 1;
			int lmid = mid - 1;
			int rmid = mid + 1;
			if(check(x,lmid) < check(x,rmid)) r = mid;
			else l = mid;
		}
		ans = std::min({ans,check(x,l),check(x,r)});
	}
	std::cout << ans << '\n';
	return;
}

int main() {
	std::ios::sync_with_stdio(false);
	std::cin.tie(nullptr);
	int _ = 1;
	std::cin >> _;
	while(_ --) {
		solve();
	}
	return 0;
}
```

**å®æ•°ä¸‰åˆ†**

```C++
double eps = 1e-9;
	while(std::fabs(r - l) > eps) {
		double m1 = (l * 2 + r) / 3;
        double m2 = (l + r * 2) / 3;
		if(check(m1) < check(m2)) r = m2;
		else l = m1;
	}
```

**ç‰›å®¢2B**

æ±‚æ ‘ çš„ éƒ¨åˆ†æœ€å°ç”Ÿæˆæ ‘ 

ç”±äºæ•°æ®å¤š  ç”¨ç‚¹åº¦ç›¸å¯¹å¤§å°å­˜è¾¹

æ¯æ¬¡è¯¢é—®çš„ç”¨æ—¶é—´æˆ³æ ‡è¯†ï¼Œ è¡¨ç¤ºä¸åŒæ‰¹æ¬¡

```c++
#include <bits/stdc++.h>
typedef long long ll;
const int N = 2e5 + 50;
struct E {
	int u,v,w;
	bool operator < (const E & x) const {
		return w < x.w;
	}
};
E e[N];
std::vector<std::pair<int,int>> G[N];
int d[N], tim = 0;
int fa[N],tag[N]; 
int find(int x) {
    return fa[x] == x ? x : fa[x] = find(fa[x]); 
}
void solve() {
	int k;
	std::cin >> k;
	tim ++;
	std::vector<int> a(k+1);
    
	for(int i = 1; i <= k; i++) {
		std::cin >> a[i];
		tag[a[i]] = tim;
		fa[a[i]] = a[i];
	}	

	if(k == 1) {
		std::cout << 0 << '\n';
		return;
	}
	std::vector<E> ve;
	for(int i = 1; i <= k; i++) {
		int x = a[i];
		for(auto [v,w] : G[x]) {
			if(tag[v] == tim) ve.push_back({x,v,w});
		}
	}

	std::sort(ve.begin(),ve.end());

	ll ans = 0, cnt = 0;
	for(auto [u,v,w] : ve) {
		u = find(u), v = find(v);
		if(u == v) continue;
		fa[v] = u;
		ans += w; cnt += 1;
		if(cnt == k - 1) {
			std::cout << ans << '\n';
			return;
		}
	}

	std::cout <<  -1 << '\n';
}

int main() {
	std::ios::sync_with_stdio(false);
	std::cin.tie(nullptr);
	int  n,m,q;
	std::cin >> n >> m >> q;
	for(int i = 1; i <= m; i++) {
		std::cin >> e[i].u >> e[i].v >> e[i].w;
		d[e[i].u]++;
		d[e[i].v]++;
	}
	for(int i = 1; i <= m; i++) {
		int u = e[i].u, v = e[i].v;
		if(d[u] < d[v] || d[u] == d[v] && u < v) G[u].push_back({v,e[i].w});
		else G[v].push_back({u,e[i].w});
	}

	while(q --) {
		solve();
	}
	return 0;
}
```



**ç‰›å®¢3 B**

ç»™å®š$n$æ¬¡æ“ä½œï¼Œ æ¯æ¬¡å¯å°†$x$ ä¿®æ”¹ä¸º $|x-a_i|$

æ±‚ä»$D$ å¼€å§‹å¯ä»¥å¾—åˆ°çš„æœ€å°å€¼ã€‚

$n \le 100, 1 \le a_i,D \le 10^{18} $



```c++
#include <bits/stdc++.h>
typedef long long ll;
ll gcd(ll a,ll b) {
	if(b == 0) return a;
	return gcd(b,a%b);
}

void solve() {
	ll n,D;
    std::cin >> n >> D;
    std::vector<ll> h(n);
    ll g = 0;
    for(int i = 0; i < n; i++) {
        std::cin >> h[i];
        g = gcd(h[i],g);
    }
	std::cout << std::min(D % g, g - D % g) << '\n';
	return;
}

int main() {
	std::ios::sync_with_stdio(false);
	std::cin.tie(nullptr);
	int _ = 1;
	//std::cin >> _;
	while(_ --) {
		solve();
	}
	return 0;
}
```



**ç‰›å®¢3 A**

ä¸€ç¾¤$n$æ­¥è¡Œè€…åœ¨å¤œæ™šæ¥åˆ°æ²³è¾¹ã€‚ä»–ä»¬æƒ³ç”¨ä¸€è‰˜èˆ¹æ¸¡æ²³ï¼Œè¿™è‰˜èˆ¹æœ€åˆæ˜¯åœ¨ä»–ä»¬è¿™è¾¹çš„ã€‚è¿™è‰˜èˆ¹ä¸€æ¬¡æœ€å¤šèƒ½å®¹çº³$R$åæ­¥è¡Œè€…ï¼Œè‡³å°‘éœ€è¦$L$ $(1 \leq L < R)$åæ­¥è¡Œè€…æ¥æ“ä½œã€‚

åˆ’èˆ¹æ˜¯ä¸€é¡¹ç´¯äººçš„å·¥ä½œã€‚æ¯æ¬¡ç”¨èˆ¹è¿é€ä¸€ç¾¤æ­¥è¡Œè€…åˆ°æ²³çš„å¦ä¸€è¾¹ï¼Œèˆ¹ä¸Šæ‰€æœ‰æ­¥è¡Œè€…çš„è€åŠ›å¿…é¡»å¤§äº$0$ï¼Œæ¯ä¸ªæ­¥è¡Œè€…çš„è€åŠ›åœ¨æ—…ç¨‹ç»“æŸåä¼šå‡å°‘$1$ã€‚æœ€åˆï¼Œ$i$æ­¥è¡Œè€…$(1 \leq i \leq n)$çš„è€åŠ›å€¼ä¸º$h_i$ã€‚

ä½ éœ€è¦ç¡®å®šå®ƒæ˜¯å¦å¯ä»¥è¿è¾“ã€‚

éœ€è¦ä»æ²³çš„å³ä¾§å¾€å›é€è¿è¶Ÿæ•°æœ€å°å€¼ï¼š$s = \left\lceil\dfrac{n-R}{R-L}\right\rceil$

ä»¤$a_i = $ $\left\lfloor\dfrac{h_i - 1}{2}\right\rfloor$ ä¸ºç¬¬$i$ä¸ªäººå¤šæ¥å›çš„è¶Ÿæ•°

å¿…è¦æ¡ä»¶ï¼š$\sum _{i=1} ^{n} min(a_i,s) \ge sL$ 

è´ªå¿ƒï¼š ä»å³ä¾§å¾€å›è¿ç›¸å½“äºæ¯æ¬¡å°†$a_1,a_2,a_i,a_n$ æœ€å¤§çš„ $L$ ä¸ªå…ƒç´ å‡ä¸€ 

```c++
#include <bits/stdc++.h>
typedef long long ll;

void solve() {
	int n,L,R;
    int num = 0, ans = 0;
    std::cin >> n >> L >> R;
    int s = (n - R - 1) / (R - L) + 1;
    std::vector<int> h(n),a(n);
    for(int i = 0; i < n; i ++) {
        std::cin >> h[i];
        if(h[i] > 2) {
            a[i] = (h[i] - 1) / 2;
            num ++;
        }
    }
    if(R >= n) {
        std::cout << "Yes" << '\n';
        return;
    }
    else {
        if(num < L) std::cout << "No" << '\n';
        else {
            for(int i = 0; i < n; i++) {
                ans += std::min(a[i],s);
            }
            if(ans  >= s * L) {
                std::cout << "Yes" << '\n'; 
            }
            else std::cout << "No" << '\n';
        }
    }
	return;
}

int main() {
	std::ios::sync_with_stdio(false);
	std::cin.tie(nullptr);
	int _ = 1;
	//std::cin >> _;
	while(_ --) {
		solve();
	}
	return 0;
}
```

![image-20241027221413051](C:/Users/LWQ/AppData/Roaming/Typora/typora-user-images/image-20241027221413051.png)

```c++
// Problem: åŒ»ç”Ÿ
// Contest: NowCoder
// URL: https://ac.nowcoder.com/acm/contest/92972/D
// Memory Limit: 524288 MB
// Time Limit: 2000 ms
// 
// Powered by CP Editor (https://cpeditor.org)

#include <bits/stdc++.h>
typedef long long ll;
typedef unsigned long long ull;
using i64 = long long;
const int N = 2e3 + 4;
const int mod = 1e9 + 7;
void solve() {
	int n,m;
	std::cin >> n >> m;
	auto fsum = [&] (std::string str) -> int {
		int sum = 0;
		int len = str.length();
		for(int i = 0; i < len; i++) {
			sum = sum * 2 + (str[i] - '0');
		}
		return sum;
	};
	std::vector<int> p(n);
	std::vector<int> v;
	std::vector<bool> vis(1<<m,false);
	for(int i = 0; i < n; i++) {
		std::string s;
		std::cin >> s;
		p[i] = fsum(s);
		if(vis[p[i]] == false) {
			v.push_back(p[i]);
			vis[p[i]] = true;
		}
	}
	int k;
	std::cin >> k;
	std::vector<int> d(k);
	for(int i = 0; i < k; i++) {
		std::string s;
		std::cin >> s;
		d[i] = fsum(s);
	}
	std::vector<std::pair<int,int> > pa;
	for(int t = 1; t < (1 << k) ; t++) { // è¯çš„æ‰€æœ‰æ··åˆæ–¹æ¡ˆ
		int A = 0, B = 0;
		for(int i = 0;i < k ;i++) { // è§£æ„tçš„æ¯ä¸€ä½
			if(t & (1 << i)) {
				A |= d[i];  // è‡ªå·±æœ‰çš„è¯ æ··åˆ
				B ++;
			}
		}
		pa.push_back({B,A});
	}
	std::sort(pa.begin(),pa.end()); // æŒ‰ç…§ æ··åˆçš„æ•°é‡æ’åº
	std::vector<int> ans((1<<m),-1);
	for(auto c : v) {
		if(c == 0) { // æ— ç—… 00000
			ans[c] = 0;
			continue;
		}
		for(auto [b,a] : pa) {
			if( (a & c)  ==  c) { // æšä¸¾æ‰€æœ‰æ··åˆè¯  èƒ½æ²»
				ans[c] = b;
				break;
			}
		}
	}
	for(auto c : p) {
		std::cout << ans[c] << '\n';
	}
	return;
}

int main() {
	std::ios::sync_with_stdio(false);
	std::cin.tie(nullptr);
	int _ = 1;
	//std::cin >> _;
	while(_ --) {
		solve();
	}
	return 0;
}
```

[E - Mod Sigma Problem](https://atcoder.jp/contests/abc378/tasks/abc378_e)

![image-20241105211054917](C:/Users/LWQ/AppData/Roaming/Typora/typora-user-images/image-20241105211054917.png)

![image-20241105211112705](C:/Users/LWQ/AppData/Roaming/Typora/typora-user-images/image-20241105211112705.png)



```c++
// Problem: E - Mod Sigma Problem
// Contest: AtCoder - AtCoder Beginner Contest 378
// URL: https://atcoder.jp/contests/abc378/tasks/abc378_e
// Memory Limit: 1024 MB
// Time Limit: 2000 ms
// 
// Powered by CP Editor (https://cpeditor.org)

#include <bits/stdc++.h>
typedef long long ll;
typedef unsigned long long ull;
using i64 = long long;
const int N = 2e5 + 4;
const int mod = 1e9 + 7;
int b[N];  
i64 ans = 0;
i64 msort(std::vector<i64> &a,int l,int r)
{
    if(l >= r) return 0;
    int mid = (l + r) / 2;
    msort(a,l,mid); 
    msort(a,mid+1,r);
    int i = l, j = mid + 1,k = l;
    while(i <= mid && j <= r)
    {
        if(a[i] <= a[j])  b[k++] = a[i++];
        else {
            b[k++] = a[j++];
            ans += (mid - i + 1);
        }
    }
    while(i <= mid) b[k++] = a[i++];
    while(j <= r) b[k++] = a[j++];
    for(int i = l; i <= r; i++)  a[i] = b[i];
	return ans;
}

void solve() {
	int n,m;
	std::cin >> n >> m;
	std::vector<i64> a(n+1),s(n+1),t(n+1);

	for(int i = 1; i <= n; i++) {
		std::cin >> a[i];
		s[i] = s[i-1] + a[i];
		s[i] %= m;
	}
	std::copy(s.begin(),s.end(),t.begin());
	i64 res = msort(t,1,n);
	i64 Ans = 0;
	for(int i = 1; i <= n; i++) {
		Ans += s[i] * i;
	}
	for(int i = 1; i <= n; i++) {
		Ans -= (s[i-1] * (n - i + 1));
	}
	Ans += m * res;
	std::cout << Ans << '\n';
	return;
}

int main() {
	std::ios::sync_with_stdio(false);
	std::cin.tie(nullptr);
	int _ = 1;
	//std::cin >> _;
	while(_ --) {
		solve();
	}
	return 0;
}
```

